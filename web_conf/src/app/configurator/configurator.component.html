<div id="save-button-container">
    <button
        (click)="Save()"
        mat-flat-button
        color="secondary"
    >
        Save to your Udong
    </button>
</div>

<ng-container *ngIf="config">
    <app-board-buttons
        class="board-container"
        [config]="config!"
        [active_switch_id]="active_switch_id"
        (activeSwitchIdChanged)="setActiveSwitchId($event)"
    >
    </app-board-buttons>

    <div class="configulator-container">
        <mat-card
            class="group-selector-card config-panel"
            appearance="outlined"
        >
            <mat-card-header>
                <mat-card-subtitle>
                    Analog Switch {{active_switch_id}}
                </mat-card-subtitle>
            </mat-card-header>

            <mat-card-content class="switches-container">
                <app-group-selector
                    [assignment]="activeSwitchAssignment()"
                    [group_ids]="group_ids"
                    (selectorClosed)="onGroupSelected()"
                >
                </app-group-selector>

                <mat-form-field>
                    <mat-label>Button Mapping</mat-label>
                    <mat-select
                        [value]="0"
                        (valueChange)="changeButtonMapping($event)"
                    >
                        @for (button_id of consts.button_ids; track button_id) {
                        <mat-option [value]="button_id">
                            {{consts.button_names[button_id]}}
                        </mat-option>
                        }
                    </mat-select>
                </mat-form-field>
            </mat-card-content>
        </mat-card>

        <app-analog-switch-config
            class="switch-item config-panel"
            [config]="activeSwitchGroup()"
        >
        </app-analog-switch-config>
    </div>
</ng-container>